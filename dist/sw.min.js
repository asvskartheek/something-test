async function fetchNewVisit(t){try{let e=await fetch("https://swifto-full-b2njeivg2a-uc.a.run.app/new_visit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swifto_id:t})});if(!e.ok)throw Error(`New Visit API request failed with status: ${e.status}`);let i=await e.json();i.forEach(t=>{let e=RegExp(t.original,"g");document.body.innerHTML=document.body.innerHTML.replace(e,t.variant)}),setTimeout(()=>{fetchEngaged(t,i)},1e4)}catch(a){console.error("Error:",a)}}async function fetchEngaged(t,e){try{let i=await fetch("https://swifto-full-b2njeivg2a-uc.a.run.app/engaged",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swifto_id:t,text_and_variant_id:e})});if(!i.ok)throw Error(`Engaged API request failed with status: ${i.status}`);console.log("Engaged successfully.")}catch(a){console.error("Error:",a)}}const swiftoId=window.SWIFTO_ID;console.log(swiftoId),fetchNewVisit();
