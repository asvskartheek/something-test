async function fetchNewVisit(t){try{let i=await fetch("https://swiftoapi-b2njeivg2a-as.a.run.app/new_visit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swifto_id:t})});if(!i.ok)throw Error(`New Visit API request failed with status: ${i.status}`);let e=await i.json();e.forEach(t=>{let i=RegExp(t.original,"g");document.body.innerHTML=document.body.innerHTML.replace(i,t.variant)}),setTimeout(()=>{fetchEngaged(t,e)},1e4)}catch(a){console.error("Error:",a)}}async function fetchEngaged(t,i){try{let e=await fetch("https://swiftoapi-b2njeivg2a-as.a.run.app/engaged",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swifto_id:t,text_and_variant_id:i})});if(!e.ok)throw Error(`Engaged API request failed with status: ${e.status}`);console.log("Engaged successfully.")}catch(a){console.error("Error:",a)}}var swiftoId=window.SWIFTO_ID;console.log(swiftoId),fetchNewVisit(swiftoId);
